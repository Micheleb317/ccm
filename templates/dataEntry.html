<template name="dataEntry">
  {{> openRoundPicker competitionId=competitionId competitionUrlId=competitionUrlId roundId=roundId eventCode=eventCode allowChosingClosedRounds=true roundRouteName="dataEntry"}}

  <div class="container-fluid">
    {{#if roundId}}
      {{#if isSelectedRoundClosed}}
        <div class="alert alert-warning" role="alert">
          <strong>Warning!</strong> You're entering times for a closed round.
          This could create inconsistencies in the set of people who
          advanced to the next round.
        </div>
      {{/if}}
      {{#if isSelectedRoundUnstarted}}
        <div class="alert alert-warning" role="alert">
          <strong>Warning!</strong> You're entering times for a round that has
          not yet started.
        </div>
      {{/if}}
      {{> roundDataEntry roundId=roundId}}
    {{/if}}
  </div>
</template>

<template name="roundDataEntry">
  <div class="row">

    <div class="results-sidebar-container col-xs-12 col-sm-6 col-md-5 col-lg-4">
      <div class="results-sidebar">
        <div class="focusguard focusguard-top" tabindex="0"></div>
        <input name="name" id="inputParticipantName" class="typeahead form-control" type="text" placeholder="Enter name">
        {{#if selectedResultId}}
          <div class="checkbox">
            <label>
              <input type="checkbox" name="noShow" checked="{{noShow}}"> No show
            </label>
          </div>
        {{/if}}

        {{#with round}}
          {{#if softCutoff}}
            <p>
              Soft cutoff: {{clockFormat softCutoff.time}} {{softCutoffFormatName softCutoff.formatCode}}
            </p>
          {{/if}}
          {{#if hardCutoff}}
            <p>
              Hard cutoff: {{clockFormat hardCutoff.time}}
            </p>
          {{/if}}
        {{/with}}

        {{#if selectedResultId}}
          <table class="table table-condensed jChesterTable">
            <tbody>
              {{#each selectedSolves}}
                {{> solveTimeEditor}}
              {{/each}}
            </tbody>
          </table>
          <div class="focusguard focusguard-bottom" tabindex="0"></div>
        {{/if}}
      </div>
    </div>

    <div id="selectableResults" class="col-xs-12 col-sm-6 col-md-7 col-lg-8">
      {{> roundResultsList roundId=roundId selectParticipant=true selectParticipantListener=selectParticipantListener}}
    </div>

  </div>
</template>

<template name="solveTimeEditor">
  <tr class="{{#if solveWarnings}}has-warnings{{/if}} {{#if solveSkippedDueToCutoff}}solve-skipped-due-to-cutoff{{/if}}">
    <td>
      <i class="fa fa-fw solve-time-warning-icon" data-placement="top" data-toggle="popover" data-trigger="hover" data-html="true"></i>
    </td>
    <td>
      {{> mjChester solveTime=solveTime index=index name="inputSolve" editableSolveTimeFields=editableSolveTimeFields}}
    </td>
  </tr>
</template>
